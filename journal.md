# Journal

Thursday 28/09/2022
- Explored how Napari works and its plugins, really just looked at the CellPose integration plugin. Still need to workout how to correct the predictions.
- Had a meeting with Ivor, Helfrid and Ryan for 1 hour where we talked about the features Ryan was collecting on cells, Ivor explained we should explore VAEs to get more features, I talked about my Napari exploration and the 2009 surface curvature histogram paper that Helfrid said was a good start, I proposed to do a Napari presenation to Helfrid's lab and Ivor said I have to make a sketch of what my dissertation will look like.
- I started the GitHub project and started setting up the project with the correct requirements, taking them from the cell-SCT project.
- I need to make a plan of what I want to achieve in the next two weeks for this project.

Monday 03/10/2022
- I ran into some issues while trying to install napari and run it on the Windows Chichester lab computers, but now it is installed and running and I documented how to do it and avoid the issues I had and how I solved them on the "setup.md" file in this project.
- I followed the tutorial from Napari to create a very basic Napari plugin and then how to do it with cookiecutter (which creates a template for you) and I documented one issue I had (not having installed git before installing cookiecutter with pip) and its solution in the "plugin_creation.md" file in this project.

Tuesday 04/10/2022
- I quickly setup Napari on a new Windows computer and made a little correction the the "quick setup" commands, adding the command that pip installs the missing "imageio_ffmpeg" package.
- I read Ivor's email on some thoughts and guidance on the group meetings he will be hosting for his group of 3rd year projects (which I am apart of). I read [this blog on training neural networks](http://karpathy.github.io/2019/04/25/recipe/) that he recommended in his email.
- I sent a ticket to the IT department (because Luke Igerson is sick these days) about getting GlobalProtect installed on every computer.
- I started looking at the available Napari plugins and will start evaluating some of them, with a note inside of this project that keeps track of my review. This will probably be when GlobalProtect will be installed so I can do a quick check with some Omero data of how they work. I will probably spend a few hours testing a few of them.
- Importantly, I need to make a Napari plugin for tomorrow that just measures the size of cells (or their mask from CellPose2 really) that I can show to Ivor and Helfrid to show what I've learned about Napari and how I will be using it. I also need to write a quick document that shows what my objectives will be for this project.

Wednesday 05/10/2022
- Today I played with Napari and trying to create a plugin. I uploaded the plugin I currently have to this GitHub project. The progress has mostly been disabling other widgets. I am trying to find the correct variables to be able to access the different layers in Napari from the plugin as that would let me access the mask generated by CellPose and start doing some tracking. I will be developing this tracking in a separate project, so without Napari, and then reintroducing it to Napari as it is too annoying having to restart it each time (even though it is fast, I need a faster response to my code). 
- I had a meeting with Ivor and Ryan, Helfrid was still stick. Most of the meeting was Ryan talking about soft labelling and Ivor giving advice. He also showed his VAE and Ivor gave some advice on improving it, especially on the loss function used (Ryan was using Binary Cross Entropy loss but since it is a categorical labelling (multi-class) Ivor was recommending Categorial Cross Entropy Loss). I just talked about my progress with discovering Napari, trying to build a plugin and promising a working demo plugin by next Wednesday.
- Ivor reminded me that I have to make a document that shows my core objectives for this project. I am thinking that it will be Napari tracking plugins (maybe only one plugin with the various tracking parts being the widgets) for the size, shape and labelling intensity and there will be an extra part on classifying. For now, I am focusing on being able to build a plugin and then I will do one or two tracking features that I will include in the plugin and evaluate them, then I will go back to the classification that will also be included in the plugin, and then will go back to develop more tracking features that Helfrid's lab's cell biologists may need.
- I will also need to work on the Napari demo for Helfrid's lab and also work on the interim report soon.

Monday 10/10/2022
- Lots of progress: I was able to add some very basic tracking features to a Napari plugin such as counting pixels in the mask (from a selected layer in a drop down menu) which can give some basic info on the size (in pixels) of cells (grouped or individually).
- I spent a lot of time trying to implement the ToolTip from various links that I found online (https://github.com/napari/napari/pull/2658) and I failed. I did learn some stuff about Napari in the process and also that ToolTip can be activated from the preferences and is the data from the status bar in the bottom left of the GUI but I don't understand how to customise it (as in put my own data in the status bar) and make the tooltip appear when the mouse hovers over the cell.
- With the failed ToolTip implementation, I am now working on creating my own. I feel like I can learn a lot doing this about creating Napari plugins. I think this will be the last thing I implement to show Helfrid and Ivor that I can make Napari plugins and can finally move on from software engineering stuff to machine learning stuff (ie implementing machine learning tracking (first making it work) and packaging trainable general models in a Napari plugin). It has to work through a QWidget not a magic widget as the mouse event listeners don't work in the magic widgets (I'm not sure why, probably a scope issue). So I need to find the coordinates of the mouse (done), then see if they correspond to a cell in the numpy array as the mouse coordinates indicate a pixel which is in the numpy array which, if it has a number other than 0, is a cell, and then display that information in a little self dissapearing pop up that I don't want to be a window but just a little text box next to the mouse. Otherwise it can be displayed in a text box with the widget buttons.
- I added my notes which includes ideas to add in this demo plugin in the project. It's called "steps in first Napari plugin". I also added a TIF image and its cellpose mask in the "Example_imgs" folder that I just created in this project to be used when working with this plugin.
